<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Main Window</title>
    <link href="https://fonts.googleapis.com/css?family=Bungee+Inline|Nunito+Sans" rel="stylesheet">
    <link type="text/css" rel="stylesheet"  data-th-href="@{/css/style.css}">
</head>
<body>
    <nav>
        <a href="/" class="navbar__logo">Books</a>
        <ul class="navbar">
            <li><a href="/book/list">List</a></li>
            <li class="navbar__active"><a href="/book/new">Add new book</a></li>
        </ul>
    </nav>
    <div class="container">
        <h2 class="form__title">Add new Book</h2>
        <form class="form" th:object="${book}" th:action="@{/book/add-book}" method="post">
            <input type="hidden" th:field="*{id}">
            <div class="form__group--double">
                <div class="form__group--small">
                    <input class="form__input" id="isbn" placeholder="ISBN" type="text" th:field="*{isbn}" maxlength="13" pattern="[0-9]{10,13}" autocomplete="off" required>
                    <label class="form__label" for="isbn">ISBN</label>
                </div>
                <div class="form__group--small">
                    <input class="form__input" id="author" placeholder="Author" type="text" th:field="*{author}" maxlength="255" autocomplete="off" required>
                    <label class="form__label" for="author">Author</label>
                </div>
            </div>
            <div class="form__group">
                <input class="form__input" id="title" placeholder="Title" type="text" th:field="*{title}" maxlength="255" autocomplete="off" required>
                <label class="form__label" for="title">Title</label>
            </div>
            <div class="form__group">
                <input class="form__input" id="subtitle" placeholder="Subtitle" type="text" th:field="*{subtitle}" maxlength="255" autocomplete="off">
                <label class="form__label" for="subtitle">Subtitle</label>
            </div>
            <div class="form__group--double">
                <div class="form__group--small">
                    <input class="form__input" id="publisher" placeholder="Publisher" type="text" th:field="*{publisher}" maxlength="255" autocomplete="off">
                    <label class="form__label" for="publisher">Publisher</label>
                </div>
                <div class="form__group--small">
                    <input class="form__input" id="published" placeholder="Published" type="datetime" th:field="*{published}" maxlength="255" autocomplete="off">
                    <label class="form__label" for="published">Published</label>
                </div>
            </div>
            <div class="form__group--double">
                <div class="form__checkbox-group">
                    <input class="form__checkbox-input" id="checkbox" type="checkbox" checked="unchecked">
                    <label class="form__checkbox-label" for="checkbox" onclick="toggleImageSelectorVisibility()">
                        <span class="form__checkbox-button"></span>
                        &nbsp;Has image?
                    </label>
                </div>
                <div id="toggle" class="form__group--small" style="display: none;">
                    <!--<input id="image" type="file" th:field="*{image}">-->
                    <input class="form__input" type="text" id="image" placeholder="Image" th:field="*{image}">
                    <label class="form__label" for="image">Image</label>
                </div>
            </div>
            <div class="form__group--double">
                <div class="form__group--small">
                    <input class="form__input" id="category" placeholder="Category" type="text" th:field="*{category}" maxlength="20" autocomplete="off">
                    <label class="form__label" for="category">Category</label>
                </div>
                <div class="form__group--small">
                    <input class="form__input" id="pages" placeholder="Pages" type="number" th:field="*{pages}">
                    <label class="form__label" for="pages">Pages</label>
                </div>
            </div>
            <div class="form__group">
                <textarea class="form__input" id="description" placeholder="Description" th:field="*{description}" maxlength="500" rows="10"></textarea>
                <label class="form__label" for="description">Description</label>
            </div>
            <div class="form__group">
                <input class="form__input" id="website" placeholder="Website" type="text" th:field="*{website}" maxlength="255" pattern="(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})" autocomplete="off">
                <label class="form__label" for="website">Website</label>
            </div>
            <div class="form__buttons">
                <button class="btn__create" type="submit">Create</button>
                <button class="btn__cancel" onclick="javascript:window.history.back(-1);return false;">Cancel</button>
            </div>
        </form>
    </div>
    <script>
        function toggleImageSelectorVisibility() {
            let input = document.getElementById('checkbox');
            let toggle = document.getElementById('toggle');

            if (input.checked) toggle.style.display = 'block';
            else toggle.style.display = 'none';
        }
    </script>
</body>
</html>